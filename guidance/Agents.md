# AI Agent Guidelines - Golden Agents Framework

> **Generated by**: superpowers-plus/guidance/seed.sh
> **Last Updated**: 2026-02-01
> **Languages**: shell
> **Type**: genesis-tools

This file is self-contained and portable. No external references required.

---

## Core Guidelines

# Superpowers Integration

> **Priority**: CRITICAL - Load at conversation start  
> **Source**: Workspace root Agents.md, all project Agents.md files

## Bootstrap Command

At the START of every conversation, run:

```bash
node ~/.codex/superpowers-augment/superpowers-augment.js bootstrap
```

This loads available skills and the `using-superpowers` skill.

## Key Skills Reference

| Skill | When to Use |
|-------|-------------|
| `superpowers:brainstorming` | Before creative/feature work |
| `superpowers:systematic-debugging` | Before fixing bugs |
| `superpowers:test-driven-development` | Before writing implementation |
| `superpowers:verification-before-completion` | Before committing, creating PRs, or claiming done |
| `superpowers:writing-plans` | Before multi-step tasks |
| `superpowers:perplexity-research` | When stuck or uncertain (see below) |
| `superpowers:requesting-code-review` | Before creating PRs or merging to main |
| `superpowers:finishing-a-development-branch` | When completing work (merge/PR/cleanup decisions) |
| `enforce-style-guide` | Before committing shell scripts |

## üîç Perplexity Research - Automatic Invocation

**CRITICAL**: This skill has AUTOMATIC triggers. You MUST invoke `superpowers:perplexity-research` when:

| Trigger | Action |
|---------|--------|
| **2+ Failed Attempts** | Same operation failed twice ‚Üí invoke Perplexity |
| **Uncertainty/Guessing** | About to guess at an answer ‚Üí invoke Perplexity |
| **Cutting Corners** | About to violate Agents.md guidance ‚Üí invoke Perplexity |
| **Hallucination Risk** | Unsure about API/library/fact ‚Üí invoke Perplexity |
| **Outdated Knowledge** | Post-training-cutoff topic ‚Üí invoke Perplexity |
| **Unknown Errors** | Can't interpret error message ‚Üí invoke Perplexity |

**Decision tree**:
- Personal preference question? ‚Üí Ask the user
- Broader/extrinsic research needed? ‚Üí Invoke Perplexity

**Manual override**: User can always say "Use Perplexity to research X"

**ALWAYS announce**: `üîç **Consulting Perplexity**: [topic] - Reason: [trigger]`

**Stats tracking**: Update `~/.codex/perplexity-stats.json` after every invocation

## Skill Commands

**Load a skill:**
```bash
node ~/.codex/superpowers-augment/superpowers-augment.js use-skill superpowers:<skill-name>
```

**List all skills:**
```bash
node ~/.codex/superpowers-augment/superpowers-augment.js find-skills
```

## The Rule

> **IF A SKILL APPLIES TO YOUR TASK (even 1% chance), YOU MUST INVOKE IT.**

This is not optional. Skills exist to ensure quality and consistency.

## Skill Locations

| Location | Prefix | Purpose |
|----------|--------|---------|
| `~/.codex/superpowers/skills/` | `superpowers:` | Core framework skills |
| `~/.codex/skills/` | (none) | Personal skills (override superpowers) |
| `.claude/skills/` | (repo-local) | Repo-specific skills |

## Cross-Machine Compatibility

- All paths use `~/` for home directory (works on any machine)
- Superpowers should be installed on all development machines
- Each repo is self-contained and can be cloned independently


---

# Communication Standards

> **Priority**: HIGH - Governs all AI-generated text  
> **Source**: superpowers-plus, genesis, codebase-reviewer, bloginator Agents.md

## Core Principles

1. **No flattery** - Never start responses with "Great question!" or "Excellent point!"
2. **Evidence-based claims only** - Cite sources, provide data, or qualify as opinion
3. **No celebratory language** - Skip "I'm excited to..." or "This is amazing!"
4. **Direct communication** - State facts without embellishment

## Status Update Template

When providing status updates, use this format:

```markdown
## Status Update

**Current State**: [Brief description]

**Completed**:
- [Item 1]
- [Item 2]

**In Progress**:
- [Item with % or step indicator]

**Blocked/Needs Input**:
- [Item requiring user action]

**Next Steps**:
1. [Immediate next action]
2. [Following action]
```

## Proactive Communication

- Provide updates at natural breakpoints
- Flag blockers early, don't wait for user to ask
- Summarize progress after completing multi-step work
- Ask clarifying questions before making assumptions

## Tone Guidelines

| Instead of | Use |
|------------|-----|
| "Great question!" | [Skip, answer directly] |
| "I'd be happy to help!" | [Skip, just help] |
| "This is a fascinating problem" | [Skip, solve the problem] |
| "I think this might work" | "This approach handles X because Y" |
| "Hopefully this helps" | [Skip, or ask if more needed] |

## Error Communication

When reporting errors or issues:
1. State what failed
2. State what was expected
3. Provide relevant error output (trimmed)
4. Suggest next steps or ask for guidance

## User Deference

- Never push back on user preferences without reason
- Provide options when multiple approaches exist
- Respect existing patterns in the codebase
- Ask before making potentially disruptive changes


---

# Anti-Slop Writing Rules

> **Priority**: CRITICAL - Apply to ALL generated text  
> **Source**: superpowers-plus, bloginator Agents.md

## ‚õî Banned Phrases

| Category | Banned Phrases |
|----------|----------------|
| **Self-Promotion** | production-grade, world-class, enterprise-ready, best-in-class, state-of-the-art |
| **Hype Words** | game-changing, revolutionary, cutting-edge, transformative, groundbreaking, innovative |
| **Filler Boosters** | incredibly, extremely, highly, truly, absolutely, very, really |
| **Vague Quality** | robust, seamless, comprehensive, holistic, elegant, powerful, flexible |
| **AI Tells** | leverage, utilize, facilitate, enable, empower, streamline, optimize |
| **Sycophancy** | Great question!, Happy to help!, Excellent point!, I appreciate..., Absolutely! |

## Writing Principles

1. **Specific over vague** - "reduces build time by 40%" not "significantly improves performance"
2. **Active over passive** - "This script validates inputs" not "Inputs are validated by this script"
3. **Short over long** - Prefer shorter sentences when meaning is preserved
4. **Evidence over assertion** - "Benchmarks show X" not "This is highly performant"

## Sentence Structure Rules

- Start with subject and verb when possible
- Avoid starting sentences with "It is" or "There are"
- One idea per sentence
- Break complex sentences into multiple simpler ones

## Document Structure

- Lead with the most important information
- Use headings to organize, not to impress
- Tables for comparisons, lists for sequences
- Code blocks with language hints

## Self-Check Before Output

Before generating text, mentally review:
1. Any banned phrases present?
2. Any unsupported claims?
3. Any unnecessary qualifiers?
4. Is this the shortest way to say it?

## Related Skills

For comprehensive slop detection and elimination:
- `superpowers-plus/skills/detecting-ai-slop/`
- `superpowers-plus/skills/eliminating-ai-slop/`


---

## Workflows

# Deployment Workflow

> **Priority**: HIGH - Applies to all projects with CI/CD  
> **Source**: strategic-proposal, architecture-decision-record, genesis Agents.md

## ‚ö†Ô∏è MANDATORY: CI Before Deploy

**NEVER deploy without green CI.** This is non-negotiable.

### Three-Step Process

```bash
# Step 1: Push changes to GitHub
git push origin main

# Step 2: WAIT for CI to pass
# ‚ö†Ô∏è DO NOT PROCEED until all checks are GREEN (not red X)

# Step 3: Deploy ONLY after CI passes
./scripts/deploy-web.sh  # or equivalent
```

## Quality Gates Checklist

Before deployment, verify:
- [ ] All tests pass locally
- [ ] Linting passes with no errors
- [ ] CI shows green checkmark
- [ ] No security vulnerabilities (npm audit, govulncheck, pip-audit)
- [ ] Coverage meets minimum threshold
- [ ] Documentation updated if APIs changed

## Non-Negotiable Quality Requirements

1. **All code must compile/build without errors**
2. **All tests must pass** - NEVER skip, disable, or bypass tests
3. **No linting errors** - Fix immediately, don't defer
4. **Commit messages must be descriptive**
5. **Changes must be properly staged** before commit

## Reference Implementations

When uncertain, check these canonical implementations:
- **PRIMARY**: `genesis-tools/architecture-decision-record/`
- **SECONDARY**: `genesis-tools/product-requirements-assistant/`

## Setup Scripts

**Rule**: ALL dependencies installed via setup scripts, NEVER manual `npm install`:
```bash
./scripts/setup.sh          # Full setup
./scripts/setup-web.sh      # Web-specific setup
```


---

# Testing Standards

> **Priority**: HIGH - Apply to all code changes  
> **Source**: genesis, pr-faq-validator, bloginator, scripts Agents.md

## Coverage Requirements by Language

| Language | Minimum Coverage | Target |
|----------|-----------------|--------|
| Go | 80% | 85%+ |
| JavaScript | 85% | 90%+ |
| Python | 50% | 70%+ |
| Shell | N/A (validation) | 100% functions tested |

## Pre-Commit Validation Checklist

Before committing, verify:

1. **VERIFY STYLE_GUIDE.md compliance** - DO THIS FIRST
2. **Lint the code** - No errors allowed
3. **Test the code** - MANDATORY, all tests pass
4. **Validate the code** - Type checking where applicable
5. **Verify variable exports** - CRITICAL FOR LIBRARIES
6. **Handle edge cases** - Empty inputs, missing files
7. **Error handling** - All errors caught and handled
8. **Input validation** - All user inputs validated

## Pre-Push Audit Checklist

Before pushing, verify:

1. All new code has tests
2. All tests pass locally
3. Coverage hasn't decreased
4. Linting passes
5. Types check (TypeScript/mypy)
6. Documentation updated
7. Commit messages are descriptive
8. No debug code left in
9. No secrets in code
10. Changelog updated (if applicable)

## Test-Driven Development

For new features, follow TDD:
1. Write failing test first
2. Implement minimum code to pass
3. Refactor while keeping tests green
4. Repeat

## Never Skip Tests

- NEVER use `--skip-tests` flags
- NEVER comment out failing tests
- NEVER reduce coverage thresholds to pass CI
- Fix the code, not the tests


---

# Security Workflow

> **Priority**: CRITICAL - IP protection and vulnerability management  
> **Source**: codebase-reviewer, scripts Agents.md, security-upgrade skill

## üîí Pre-Commit Hooks - NEVER BYPASS

Pre-commit hooks exist to protect intellectual property. **NEVER disable or bypass them.**

```bash
# ‚ùå NEVER DO THIS
git commit --no-verify

# ‚úÖ ALWAYS DO THIS
git commit  # Let hooks run
```

## Security Scanning Tools

| Language | Tool | Command |
|----------|------|---------|
| Node.js | npm audit | `npm audit --json` |
| Go | govulncheck | `govulncheck ./...` |
| Python | pip-audit | `pip-audit -r requirements.txt` |

## Security Upgrade Workflow

1. **Discovery** - Identify projects with dependencies
2. **Scan** - Run security scanners
3. **Upgrade** - Fix vulnerabilities
4. **Validate** - Compile, test, verify
5. **Re-scan** - Confirm fixes
6. **Commit** - Push with green CI

## CVE Response Priority

| Severity | Response Time |
|----------|---------------|
| Critical | Immediate |
| High | Same day |
| Moderate | Within week |
| Low | Next release |

## Secret Management

- NEVER commit secrets to git
- Use environment variables for API keys
- Store secrets in secure credential managers
- Use `.env.local` files (gitignored)
- Prompt for secrets interactively in setup scripts

## Related Skills

For comprehensive security workflows:
- `superpowers-plus/skills/security-upgrade/`


---

# Build Hygiene Standards

> **Priority**: CRITICAL - Apply to all projects with build steps  
> **Source**: RecipeArchive, genesis-tools Agents.md

## ‚ö†Ô∏è NEVER Modify Source In Place

Build processes should NEVER modify source files. Always output to dedicated directories.

```bash
# ‚ùå WRONG - modifying source
sed -i 's/version/1.0/' src/config.js

# ‚úÖ CORRECT - build output separate from source
npm run build  # Outputs to dist/
cp src/config.template.js dist/config.js
sed 's/VERSION/1.0/' < src/config.template.js > dist/config.js
```

## Go Build Hygiene

**CRITICAL**: Always run `go build` after linting to verify compilation.

```bash
# Standard Go workflow
golangci-lint run ./...    # Step 1: Lint
go build ./...             # Step 2: ALWAYS compile after lint
go test ./...              # Step 3: Run tests
```

The linter may pass while the code doesn't compile. **`go build` is non-negotiable.**

## Compilation Validation

Before committing, verify the code compiles:

| Language | Compile Check |
|----------|---------------|
| Go | `go build ./...` |
| TypeScript | `tsc --noEmit` |
| Java | `mvn compile` or `gradle build` |
| Rust | `cargo check` |
| Dart | `dart analyze` or `flutter analyze` |

## Build Output Directories

Standard output directory conventions:

| Language/Framework | Build Output |
|-------------------|--------------|
| Node.js | `dist/` or `build/` |
| Go | `bin/` or project root |
| Python | `dist/` (for packages) |
| Flutter | `build/` |
| Rust | `target/` |

## Clean Builds

When builds behave unexpectedly, clean and rebuild:

```bash
# Node.js
rm -rf node_modules dist
npm ci  # Clean install
npm run build

# Go
go clean -cache
go build ./...

# Flutter
flutter clean
flutter pub get
flutter build

# Rust
cargo clean
cargo build
```

## CI Build Validation

Ensure CI validates:

1. **Lint passes** - No errors or warnings
2. **Build succeeds** - Code compiles without errors
3. **Tests pass** - All tests green
4. **Coverage met** - Minimum thresholds satisfied

```yaml
# Example CI steps
steps:
  - run: npm run lint
  - run: npm run build    # MUST come after lint
  - run: npm test
  - run: npm run coverage
```

## Build Artifacts

- Never commit build artifacts to git
- Use `.gitignore` to exclude build directories
- CI should build fresh, not reuse local builds
- Tag releases in git, store artifacts separately

## Dependency Lock Files

Always commit lock files for reproducible builds:

| Package Manager | Lock File |
|-----------------|-----------|
| npm | `package-lock.json` |
| yarn | `yarn.lock` |
| pnpm | `pnpm-lock.yaml` |
| Go | `go.sum` |
| Cargo | `Cargo.lock` |
| pip | `requirements.txt` (pinned) |
| Flutter | `pubspec.lock` |


---

### Context Management

Manage context window effectively to prevent context rot and maximize signal-to-noise ratio.

#### Core Principles

1. **Context Rot**: Model accuracy degrades as context window fills. Prioritize high-signal tokens.

2. **Attention Budget**: LLMs have limited attention - each token depletes this budget.

3. **Right Altitude**: Instructions should be specific enough to guide behavior, flexible enough to generalize.

#### Progressive Disclosure Strategy

Load context in stages, not all upfront:

```
Level 1: Agents.md (always loaded)
  ‚îî‚îÄ‚îÄ Essential rules, quality gates, banned phrases

Level 2: On-demand modules (loaded when relevant)
  ‚îî‚îÄ‚îÄ Language-specific, project-type, workflow details

Level 3: Just-in-time retrieval (loaded per task)
  ‚îî‚îÄ‚îÄ Code snippets, API docs, error context
```

#### When to Compact Context

Recognize these signals:
- Conversation exceeds 50 exchanges
- Repeated similar errors suggesting lost context
- Model asks for information already provided
- Responses become generic or off-target

#### Compaction Techniques

1. **Summarize, don't repeat**: Replace verbose history with structured summary
2. **Keep artifacts, drop discussion**: Preserve code/decisions, remove exploration
3. **Reference, don't inline**: Point to files instead of pasting large blocks
4. **Prune dead ends**: Remove failed approaches once resolved

#### Structured Note-Taking

For complex multi-step tasks, maintain notes:

```markdown
## Session Notes

### Current State
- Working on: [feature/bug description]
- Blockers: [if any]

### Key Decisions
1. [Decision + rationale]

### Pending Items
- [ ] Item 1
- [ ] Item 2

### Files Modified
- path/to/file.ext - [what was changed]
```

#### Session Resumption

When resuming after context switch or new session:

1. Load Agents.md (compact if available)
2. Review recent git commits: `git log --oneline -10`
3. Check modified files: `git status`
4. Load session notes if maintained
5. State current understanding before proceeding

#### Anti-Patterns to Avoid

| Anti-Pattern | Problem | Better Approach |
|--------------|---------|-----------------|
| Pasting entire files | Wastes tokens | Use view with line ranges |
| Repeating instructions | Context bloat | Reference Agents.md |
| Including full stack traces | Low signal | Extract relevant lines |
| Verbose error descriptions | Token waste | State error + hypothesis |

#### Token Budget Guidelines

| Context Size | Action |
|--------------|--------|
| < 50% window | Continue normally |
| 50-75% window | Start summarizing history |
| 75-90% window | Aggressive compaction |
| > 90% window | Fresh session with summary |


---

## Language-Specific Guidelines

# Shell Script Conventions

> **Priority**: HIGH - Apply to all shell scripts  
> **Source**: scripts/Agents.md (extensive documentation)

## Common Pitfalls to Avoid

### SC2155 - Declare and assign separately

```bash
# ‚ùå Wrong - masks return value
local output=$(some_command)

# ‚úÖ Correct - preserves return value
local output
output=$(some_command)
```

### Filename Handling

```bash
# ‚ùå Wrong - breaks on spaces/special chars
for file in $(ls); do

# ‚úÖ Correct - safe iteration
for file in *; do
    [[ -e "$file" ]] || continue
```

### Input Sanitization

```bash
# ‚úÖ Always quote variables
"$variable"

# ‚úÖ Use [[ ]] for conditionals (safer than [ ])
if [[ -z "$var" ]]; then

# ‚úÖ Validate inputs before use
[[ -f "$file" ]] || { echo "File not found"; exit 1; }
```

## Script Template

```bash
#!/usr/bin/env bash
set -euo pipefail

# Description: [What this script does]
# Usage: script.sh [options] <args>

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

main() {
    # Implementation here
    :
}

main "$@"
```

## Pre-Commit Checklist

1. [ ] Run ShellCheck: `shellcheck script.sh`
2. [ ] Test with `set -euo pipefail`
3. [ ] Test with empty inputs
4. [ ] Test with paths containing spaces
5. [ ] Verify works on macOS (BSD tools vs GNU)
6. [ ] Check variable exports for libraries

## Platform Compatibility

macOS uses BSD tools, Linux uses GNU. Common differences:

| Command | macOS (BSD) | Linux (GNU) |
|---------|-------------|-------------|
| sed -i | `sed -i ''` | `sed -i` |
| grep -P | Not available | Available |
| date | Different flags | Different flags |

```bash
# ‚úÖ Portable sed in-place
if [[ "$(uname)" == "Darwin" ]]; then
    sed -i '' 's/old/new/' file
else
    sed -i 's/old/new/' file
fi
```

## Commands

```bash
# Lint with ShellCheck
shellcheck -x script.sh

# Check syntax
bash -n script.sh
```


---

## Project Type Guidelines

# Genesis Tools Project Conventions

> **Priority**: HIGH - Apply to all genesis-tools projects  
> **Source**: genesis, architecture-decision-record, strategic-proposal Agents.md

## Reference Implementations

When uncertain about patterns or structure, check these canonical implementations:

| Priority | Repository | Use For |
|----------|------------|---------|
| **PRIMARY** | `genesis-tools/architecture-decision-record/` | Overall structure, scripts, workflows |
| **SECONDARY** | `genesis-tools/product-requirements-assistant/` | Alternative patterns |

**ALWAYS check reference implementations BEFORE creating new patterns.**

## Setup Scripts Requirement

**Rule**: ALL dependencies installed via setup scripts, NEVER manual commands:

```bash
# ‚úÖ Correct
./scripts/setup.sh          # Full setup
./scripts/setup-web.sh      # Web-specific setup

# ‚ùå Wrong
npm install                 # Never run directly
pip install -r requirements.txt  # Use setup script
```

## Deployment Workflow

```bash
# Step 1: Push changes
git push origin main

# Step 2: WAIT for CI green checkmark
# DO NOT proceed until all checks pass

# Step 3: Deploy only after green
./scripts/deploy-web.sh
```

## Project Structure

```
project/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/           # CI/CD configs
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ setup.sh            # Main setup script
‚îÇ   ‚îú‚îÄ‚îÄ setup-web.sh        # Web dependencies
‚îÇ   ‚îú‚îÄ‚îÄ deploy-web.sh       # Deployment
‚îÇ   ‚îî‚îÄ‚îÄ test.sh             # Test runner
‚îú‚îÄ‚îÄ src/                    # Source code
‚îú‚îÄ‚îÄ web/                    # Web interface (if applicable)
‚îú‚îÄ‚îÄ docs/                   # Documentation
‚îú‚îÄ‚îÄ Agents.md               # AI guidance
‚îú‚îÄ‚îÄ CLAUDE.md               # Redirect to Agents.md
‚îî‚îÄ‚îÄ README.md               # Project readme
```

## Documentation Hygiene

- **Automatic validation** via CI
- Update docs when APIs change
- Keep README current with setup instructions
- Cross-reference related documents



---

## Project-Specific Rules

<!-- Add project-specific guidance below -->

